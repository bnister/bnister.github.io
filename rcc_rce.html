<!DOCTYPE html>
<html><head><title>RCCreator to RCExplorer</title>
<meta name="viewport" content="width=device-width">
<script type="text/javascript" src="rcc_tab.js"></script>
<style type="text/css">div { margin-bottom: 1em }</style></head>
<body><form action="#"><div>RCCreator ID <input size="40"></div>
<div><button>decode</button> <button>encode</button></div>
<div>RCExplorer protocol <select><option>?</option></select></div>
<div>Adr <input size="20"> Cmd <input size="20"></div></form>
<a rel="license" href="http://creativecommons.org/publicdomain/zero/1.0/deed.ru">
CC0</a>: public domain. Questions/ideas to ayumu (email) yandex.ru
<script type="text/javascript"><!--
document.getElementsByTagName('button')[0].onclick = function() {
    var inp = document.getElementsByTagName('input')[0].value;
    var adr = parseInt(inp.substring(4, 6), 16), out, j, k, pr, badr, bcmd;
    out = ('0000000' + adr.toString(2)).slice(-8);
    for (j = 0; j < 13; j++) {
        k = parseInt(perm[adr].substring(j, j + 1), 16);
        out += ('000' + ((parseInt(inp.substring(k + 6, k + 7), 16)
            - parseInt(key[adr].substring(j, j + 1), 16)
            ) & 0xf).toString(2)).slice(-4);
    }
    out += '00000000'; // TODO decode long XMP
    for (j = 0; j < prs.length; j++) {
        pr = prs[j];
        if (pr[0] == inp.substring(0, 4))
            if (pr[5] == -1) break;
            else if (out.substring(pr[3], pr[4])
                .replace(/0/g, 'o').replace(/1/g, '0').replace(/o/g, '1')
                == out.substring(pr[5], pr[6])) break;
    }
    document.getElementsByTagName('select')[0].value = pr[7];
    if (pr[0] == '0394') { // Sony combo TODO choose the entry
        if (out.substring(20, 21) == '0') pr[2] = 12;
        else if (out.substring(21, 22) == '0') pr[2] = 15;
        else pr[2] = 20;
        pr[1] = pr[4] = pr[2] - 5; // mimic RCExplorer
        //pr[1] = pr[4] = 7; // correct Sony15 and Sony20
    }
    if (pr[0] == '0243') { // RC-5-7/8F combo
        if (out.substring(0, 1) == '0') pr[4] = pr[3] + 7;
        else pr[4] = pr[3] + 8;
    }
    // TODO 0063 M708 pid-00B2, 0989 Bang&Olufsen bit translation
    if (pr[0] == '0082') // invert SDA2208/MC144105
        out = out.replace(/0/g, 'o').replace(/1/g, '0').replace(/o/g, '1');
    badr = out.substring(pr[1], pr[2]); // FIXME zero-length address
    bcmd = out.substring(pr[3], pr[4]);
    if (pr[8] != 'MSB') badr = badr.split('').reverse().join('');
    if (pr[8] != 'MSB') bcmd = bcmd.split('').reverse().join('');
    if (pr[0] == '0153' || pr[0] == '0173' || pr[0] == '0775') // old NEC, Pioneer
        badr = badr.replace(/0/g, 'o').replace(/1/g, '0').replace(/o/g, '1') + badr;
    if (pr[0] == '0323' || pr[0] == '0313') badr = badr + badr; // old NECx
    if (/^RECS80/.test(pr[7])) badr = ('00' + (parseInt(badr, 2) + 2).toString(2)).slice(-3);
    if (/^RC-5/.test(pr[7]) && out.substring(0, 1) == '0') bcmd = '1' + bcmd;
    if (pr[0] == '0243' && out.substring(1, 2) == '0') badr = '1' + badr;
    document.getElementsByTagName('input')[1].value =
        '0x' + ('00000000000000' + parseInt(badr, 2).toString(16).toUpperCase())
            .slice(-Math.ceil(badr.length / 4));
    document.getElementsByTagName('input')[2].value =
        '0x' + ('00000000000000' + parseInt(bcmd, 2).toString(16).toUpperCase())
            .slice(-Math.ceil(bcmd.length / 4));
    return false;
}
document.getElementsByTagName('button')[1].onclick = function() {
    var out = [], bits = [], inp, adr, cmd, j, pr, badr, bcmd;
    for (j = 0; j < prs.length; j++)
        if (prs[j][7] == document.getElementsByTagName('select')[0].value) break;
    pr = prs[j];
    adr = parseInt(document.getElementsByTagName('input')[1].value);
    cmd = parseInt(document.getElementsByTagName('input')[2].value);
    if (/^RECS80/.test(pr[7])) adr = (adr - 2) & 7;
    if (pr[7] == '0082') { adr ^= 7; cmd ^= 0x3f; } // invert SDA2208/MC144105
    // TODO pad to (2 + 13 + 2 + 13) * 4 bits
    badr = ('00000000000000000000000000000000000000000000000000000000000'
        + adr.toString(2)).slice(-(pr[2] - pr[1])).split('');
    bcmd = ('00000000000000000000000000000000000000000000000000000000000'
        + cmd.toString(2)).slice(-(pr[4] - pr[3])).split('');
    if (pr[8] != 'MSB') badr.reverse();
    if (pr[8] != 'MSB') bcmd.reverse();
    // TODO 2 + 13 + 2 + 13
    for (j = 0; j < (2 + 13) * 4; j++) bits.push('0');
    for (j = 0; j < pr[2] - pr[1]; j++) bits[pr[1] + j] = badr[j];
    for (j = 0; j < pr[4] - pr[3]; j++) bits[pr[3] + j] = bcmd[j];
    // TODO fix Sanyo adr
    if (pr[5] != -1) for (j = 0; j < pr[4] - pr[3]; j++)
        if (bits[pr[3] + j] == '0') bits[pr[5] + j] = '1';
    if (/^NECx1/.test(pr[7]) && bits[0] == '0') bits[32] = '1';
    if (/^RC-5/.test(pr[7]) && cmd < 0x40) bits[0] = '1';
    if (pr[0] == '0243') { // RC-5-7/8F combo
        if (adr < 0x20) bits[1] = '1';
        if (pr[4] != pr[3] + 7) bits[0] = '1';
    }
    // TODO mark Sony15/20
    // TODO encode long XMP
    inp = pr[0];
    for (j = 0; j < (13 + 2) * 4; j += 4) inp += parseInt(
        bits.slice(j, j + 4).join(''), 2).toString(16).toUpperCase();
    adr = parseInt(inp.substring(4, 6), 16);
    for (j = 0; j < 13; j++)
        out[parseInt(perm[adr].substring(j, j + 1), 16)] =
            ((parseInt(inp.substring(j + 6, j + 7), 16)
            + parseInt(key[adr].substring(j, j + 1), 16)
            ) & 0xf).toString(16).toUpperCase();
    document.getElementsByTagName('input')[0].value =
        inp.substring(0, 6) + out.join('');
    return false;
}
// TODO hdr
var prs = [
[ '1042',  0,  4,  4, 10, -1, -1, 'ITT (SAA1250)' ],
[ '1072',  0,  4,  4, 10, -1, -1, 'ITT (SAA1250)' ],
[ '0103',  0,  8,  8, 16, -1, -1, 'JVC (Victor-C8D8)' ],
[ '0113',  0,  8,  8, 16, -1, -1, 'JVC (Victor-C8D8)' ], // BBK 2102
[ '3155',  0, 16, 16, 24, 24, 32, 'NEC (uPD6121/6122, NEC1)' ],
[ '2184',  0, 16, 16, 24, -1, -1, 'NEC (uPD6121/6122, NEC1)' ],
[ '0153',  0,  8,  8, 16, -1, -1, 'NEC (uPD6121/6122, NEC1)' ],
[ '3165',  0, 16, 16, 24, 24, 32, 'NEC (uPD6121G/6122A, NEC2)' ],
[ '2174',  0, 16, 16, 24, -1, -1, 'NEC (uPD6121G/6122A, NEC2)' ],
[ '0173',  0,  8,  8, 16, -1, -1, 'NEC (uPD6121G/6122A, NEC2)' ],
[ '0775',  0,  8,  8, 16, -1, -1, 'NEC (Pioneer)' ], // Pioneer 1509
[ '5215',  0, 16, 16, 24, 24, 32, 'NEC (iiyama)' ], // iiyama 510
[ '2345',  0, 16, 16, 24, 24, 32, 'NEC (TC9012/9028/9243, NECx1)' ],
[ '0323',  0,  8,  8, 16, -1, -1, 'NEC (TC9012/9028/9243, NECx1)' ],
// TODO checkbox for old variant
[ '2325',  0, 16, 16, 24, 24, 32, 'NEC (TC9012A/9028/9243, NECx2)' ],
[ '0313',  0,  8,  8, 16, -1, -1, 'NEC (TC9012A/9028/9243, NECx2)' ],
[ '0193',  8, 16,  0,  8, -1, -1, 'NOKIA (NRC17)' ],
[ '0043',  8, 16,  0,  8, -1, -1, 'NOKIA (NRC17)' ],
[ '0373',  0,  5,  5, 13, -1, -1, 'SHARP (IX0773CE)' ],
[ '0394',  7, 12,  0,  7, -1, -1, 'SONY (uPD6124-D7C5/827)' ],
[ '0394', 10, 15,  0, 10, -1, -1, 'SONY (uPD6124A-D7C8)' ], // mimic RCExplorer
[ '0394', 15, 20,  0, 15, -1, -1, 'SONY (uPD6124B-D7C13)' ], // mimic RCExplorer
//[ '0394',  7, 15,  0,  7, -1, -1, 'SONY (uPD6124A-D7C8)' ], // correct
//[ '0394',  7, 20,  0,  7, -1, -1, 'SONY (uPD6124B-D7C13)' ], // correct
// TODO checkbox
[ '0232',  1,  6,  6, 12, -1, -1, 'RC-5 (SAA3010)', 'MSB' ],
[ '0264',  0,  8,  8, 16, -1, -1, 'RC-6', 'MSB' ],
[ '0895',  0, 24, 24, 32, -1, -1, 'RC-6', 'MSB' ], // MCE MCIR-2
[ '5874',  0, 16, 16, 25, -1, -1, 'RC-6', 'MSB' ],
[ '0784',  0, 24, 24, 32, -1, -1, 'RC-MM (Nokia32)', 'MSB' ],
[ '0744',  0, 16, 16, 22, -1, -1, 'RC-MM (Nokia)', 'MSB' ], // 9600-9800
[ '0282',  0,  3,  3,  9, -1, -1, 'RECS80 (M3004)', 'MSB' ], // Finlux 5814
[ '0292',  0,  3,  3,  9, -1, -1, 'RECS80 (M3004)', 'MSB' ],
[ '0662',  0,  3,  3,  9, -1, -1, 'RECS80 (M3004)', 'MSB' ], // long
[ '0762',  0,  3,  3,  9, -1, -1, 'RECS80 (M3004)', 'MSB' ], // short
[ '1052',  0,  3,  3,  9, -1, -1, 'RECS80 (M3004)', 'MSB' ], // no modulation
[ '1062',  0,  3,  3,  9, -1, -1, 'RECS80 (M3004)', 'MSB' ], // no mod long
[ '0433',  0,  8,  8, 16, -1, -1, 'X-Sat (M50560, Proton)' ],
[ '2016',  0, 13, 26, 34, 34, 42, 'SANYO (LC7461-C13, Aiwa)' ],
[ '0014',  0, 13, 13, 21, -1, -1, 'SANYO (LC7461-C13, Aiwa)' ], // Samsung 84K
[ '2026',  0, 13, 26, 34, 34, 42, 'SANYO (LC7461-C13, Aiwa)' ],
[ '0207',  0, 32, 32, 48, -1, -1, 'REC80 (LC7464/2188, Kaseikyo)' ],
[ '0217',  0, 32, 32, 48, -1, -1, 'REC80 (LC7464/2188, Kaseikyo)' ],
[ '0272',  0,  4,  4, 12, -1, -1, 'RCA (TCL)' ],
[ '0052',  0,  4,  4, 12, -1, -1, 'RCA (MN6014A-C6D6/2185, Emerson)' ], // Distar 6014
//[ '0052',  0,  6,  6, 12, -1, -1, '? (MN6014A-C6D6/2185, Emerson)' ], // correct
[ '0714',  0,  8,  8, 16, -1, -1, 'RCA2 (Dgtec)' ],
[ '0163',  0,  8,  8, 16, -1, -1, 'RCA2 (Dgtec)' ], // Sokol HR13/14
[ '3155', 16, 32,  0, 16, -1, -1, 'NEC1 (rev)' ],
[ '3165', 16, 32,  0, 16, -1, -1, 'NEC2 (rev)' ],
[ '2345', 16, 32,  0, 16, -1, -1, 'NECx1 (rev)' ],
[ '2325', 16, 32,  0, 16, -1, -1, 'NECx2 (rev)' ],
[ '0723',  0,  7,  7, 17, -1, -1, 'KONKA (Y261)', 'MSB' ],
[ '0143',  0,  8,  8, 16, -1, -1, 'MITSUBISHI (M50462)', 'MSB' ],
[ '2143',  0,  8,  8, 16, -1, -1, 'MITSUBISHI (M50462)', 'MSB' ], // 33 kHz
[ '0422',  0,  4,  5, 12, -1, -1, 'THOMSON (RCT311/C100)', 'MSB' ],
[ '3187',  0, 16, 16, 48, -1, -1, '? (48-NEC1)' ],
[ '3197',  0, 16, 16, 48, -1, -1, '? (48-NEC2)' ],
[ '0082',  7, 10,  1,  7, -1, -1, '? (g1D10/G-C10 SDA2208, Blaupunkt)' ],
[ '0846',  0, 32, 32, 64, -1, -1, '? (XMP)', 'MSB' ],
[ '0850',  0, 32, 32, 64, -1, -1, '? (XMP)', 'MSB' ],
[ '2314',  0, 20, 20, 28, -1, -1, '? (Samsung36)' ],
[ '0243',  2,  7,  7, 14, -1, -1, '? (RC5-7F RC5-8F)', 'MSB' ], 
[ '0302',  0,  0,  0,  7, -1, -1, '? (SAA1124)' ], // pid-00A8
[ '0222',  0,  5,  5, 11, -1, -1, '? (MN6014-C5D6, Panasonic_Old)' ],
[ '0072',  0,  0,  0,  7, -1, -1, '? (G-C6 SAB3210)' ], // SDA2008 MC14497 pid-0010 IR60
[ '0752',  0,  0,  0,  7, -1, -1, '? (G-C6 SAB3210)' ],
[ '0093',  8, 15,  0,  8, -1, -1, '? (Grundig16)' ],
[ '0815',  0, 16, 16, 32, -1, -1, '? (Amino)' ],
[ '0342',  0,  0,  0,  6, -1, -1, '? (D6/C6bit M58484 IX0187PA)' ],
[ '0352',  0,  3,  3, 10, -1, -1, '? (M50115, Akai)' ],
[ '0382',  0,  3,  3, 10, -1, -1, '? (M50119P Sony)' ],
[ '0592',  0,  4,  4,  9, -1, -1, '? (uPD1986C)' ],
[ '0543',  0,  3,  3, 12, -1, -1, '? (TC9148, F12)' ],
[ '4107',  0, 32, 32, 48, -1, -1, '? (Pan7051)' ],
[ '0442',  0,  0,  0,  5, -1, -1, '? (SAF1039)' ],
[ '5485',  0, 16, 16, 32, -1, -1, '? (SAT 4Phase PPM)' ],
[ '????', 0, 60, 60, 120, -1, -1, '?', 'MSB' ]
];
var sel = document.getElementsByTagName('select')[0], met = {}, opt, i;
for (i = 0; i < prs.length - 1; i++) if (!met[prs[i][7]]) {
    opt = document.createElement('option');
    opt.text = prs[i][7];
    sel.add(opt);
    met[prs[i][7]] = true;
}
--></script></body></html>